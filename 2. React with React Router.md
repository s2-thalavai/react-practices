# 2. React project with React Router

Features to implement

1. Home → About → Contact navigation
2. Refresh does not break
3. SPA routing works
4. Azure-friendly configuration in place

## project structure

```css
react-swa-router-demo/
├── build/  <-- deploy this
├── src/
│   ├── pages/
│   │   ├── Home.js
│   │   ├── About.js
│   │   └── Contact.js
│   ├── App.js
│   ├── index.js
├── public/
├── staticwebapp.config.json
├── package.json
```

## **1. Create project**

```bash
npx create-react-app react-swa-router-demo cd react-swa-router-demo
``` 

----------

## **2. Install React Router**

```bash
npm install react-router-dom
``` 

----------

## **3. Create routing pages**

Inside `src/`, create:

```bash
src/pages/Home.js
src/pages/About.js
src/pages/Contact.js
``` 

### `src/pages/Home.js`

```js
export default function Home() {
  return (
    <div style={{ textAlign: "center", marginTop: 40 }}>
      <h2>Home Page</h2>
      <p>Welcome to Azure SWA React Router Demo!</p>
    </div>
  );
}

``` 

### `src/pages/About.js`

```js
export default function About() {
  return (
    <div style={{ textAlign: "center", marginTop: 40 }}>
      <h2>About Page</h2>
      <p>This app demonstrates routing in Azure Static Web Apps.</p>
    </div>
  );
}
``` 

### `src/pages/Contact.js`

```js
export default function Contact() {
  return (
    <div style={{ textAlign: "center", marginTop: 40 }}>
      <h2> Contact Page</h2>
      <p>You can navigate safely — even after refresh!</p>
    </div>
  );
}

```

----------


## **4. Modify App.js to include routing**

`src/App.js`

```js
import { BrowserRouter, Routes, Route, Link } from "react-router-dom";
import Home from "./pages/Home";
import About from "./pages/About";
import Contact from "./pages/Contact";

function App() {
  return (
    <BrowserRouter>
      <nav style={{ margin: 20 }}>
        <Link to="/" style={{ margin: 10 }}>Home</Link>
        <Link to="/about" style={{ margin: 10 }}>About</Link>
        <Link to="/contact" style={{ margin: 10 }}>Contact</Link>
      </nav>

      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />
        <Route path="/contact" element={<Contact />} />
      </Routes>
    </BrowserRouter>
  );
}

export default App;

```

This gives a simple menu and routing inside Azure SWA.

----------

## **5. Add Azure SWA config**

### Create file:

`staticwebapp.config.json` 

### Add this content:

```json
{
  "routes": [
    {
      "route": "/*",
      "rewrite": "/index.html"
    }
  ]
}
``` 

This ensures React Router works on:

1. Refresh  
2. Deep-link navigation

----------

# **6. Build**

```bash
npm run build
```

----------

## **7. Deploy to Azure SWA**

### 7.1. local CLI deployment

```bash
swa deploy --app-location build --deployment-token <your-token>
``` 

### 7.2. GitHub workflow — recommended

``` Push project to GitHub → Connect Azure Static Web Apps → Azure auto-builds and deploys.```


### **Step 1 — Push your React project to GitHub**

Your repo should look like:

```
react-swa-router-demo/
 ├── src/
 ├── public/
 ├── package.json
 ├── staticwebapp.config.json
 └── ...
``` 

1. include staticwebapp.config.json  
2. don't include `build/` — Azure will build automatically

➡ Commit and push to GitHub

-----

### **Step 2 — Create Azure Static Web App from Portal**

1.  Go to Azure Portal
    
2.  Search → **Static Web Apps**
    
3.  Click **Create**
    
4.  Fill details:  
    ✔ Subscription  
    ✔ Resource group  
    ✔ App name
    

Choose Hosting Plan (Free is OK)

------


### Step 3 — Connect to GitHub

During setup Azure will ask:

✔ “Sign into GitHub”  
✔ Select your GitHub repo  
✔ Select branch (e.g., main)

> Azure will auto-generate a GitHub Actions workflow file for deployment.

----

### Step 4 — Configure build settings

For React choose:

✔ Build preset: **React**  
✔ App location: `/` (or root folder)  
✔ Output location: `build`

### Example:

| Setting       | Value           |
| ------------- | --------------- |
| App location  | `/`             |
| API location  | *(leave blank)* |
| Output folder | `build`         |


### Step 5 — Azure auto-creates a GitHub workflow

In your repo, Azure adds:

`.github/workflows/azure-static-web-app.yml` 

Sample workflow:

```yaml
name: Azure Static Web Apps CI/CD

on:
  push:
    branches:
      - main
  pull_request:
    types: [opened, synchronize, reopened, closed]
    branches:
      - main

jobs:
  build_and_deploy_job:
    uses: Azure/static-web-apps-deploy@v1
    with:
      azure_static_web_apps_api_token: ${{ secrets.AZURE_STATIC_WEB_APPS_API_TOKEN }}
      repo_token: ${{ secrets.GITHUB_TOKEN }}
      action: "upload"
      app_location: "/"
      output_location: "build"
```

✔ This builds React automatically  
✔ Executes `npm install`  
✔ Runs `npm run build`  
✔ Deploys to Azure

------

## Step 6 — Commit & Push

GitHub Actions will run automatically:

➡ build your React app  
➡ deploy to Azure  
➡ show URL like:

```bash
https://yourprojectname.azurestaticapps.net``` 

----------

----------

## Step 7 — Any future push auto-deploys

Every time you:

✔ Edit  
✔ Commit  
✔ Push

Your app redeploys automatically.
